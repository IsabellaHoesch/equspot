<body id="background_index">

  <div id="map"
    style="width: 100%; height: 450px;"
    data-markers="<%= @markers.to_json %>"
    data-mapbox-api-key="<%= ENV['MAPBOX_API_KEY'] %>">
  </div>

<div class="container">

    <form autocomplete="off">
    <div>
      <%= form_tag places_path, method: :get do %>
      <%= text_field_tag :query, params[:query],
      placeholder: "Search by location" %>
    </div>
    <div class="form-row mt-2">
      <div class="col">
       <%= collection_select :sport, :id, @dropdown, :id, :name, include_blank: true %>
     </div>

     <div class="col">
       <%= submit_tag "Search by sport", class: "btn btn-success w-100" %>
     </div>
     </div>
  </form>
  <% end %>
    
    <div id="new-place-btn">
        <%= link_to new_place_path do %>
          <i class="far fa-plus-square fa-lg"></i>
        <% end %>  
    </div>

  <% @places.each do |place| %> 

    <div class="card-trip">
    
      <% if place.photos.attached? %>
        <%= cl_image_tag place.photos.first.key, crop: :fit %>
      <% else %>
        <%= image_tag 'sports_img.jpg', crop: :fill %>
      <% end %>
      
      <div class="card-trip-infos">
        <div>
          <h2><%= link_to place.name, place_path(place) %></h2>
          <p id="place-address-card"><strong><%= place.address %></strong></p>
          <p><i><%= place.description %></i></p>
        </div>

        <%= link_to place_favourites_path(place), method: :post, params: { "favourite[place_id]" => place.id } do %>
        <i class="fas fa-crown"></i>
        <% end %>
      </div>
    </div>
    <% end %>

  </div>
 </div>
</body>
