
<div class="container p-3 mt-2">

  <div class="d-flex" id="welcome">
    <h5>Welcome <%= @user.first_name %>!</h5>
  </div>

  <div class="d-flex justify-content-between pr-3 mt-3">
    <div>
      <i class="fas fa-user-circle fa-3x"></i>
    </div>
    <div id="profile-top">
      <p><strong>Check ins</strong></p>
      <span><strong><%= current_user.visits.count %></strong></span>
    </div>
    <div id="profile-top">
      <p><strong><%= link_to 'Favourites', favourites_path %></strong></p>
      <span><strong><%= current_user.favourites.count %></strong></span>
    </div>
  </div>

  <div class="mt-3">
    <p>Your reviews</p>
    <ul>
      <% @user.reviews.each do |review| %>
      <li class="list-group-item"><%= review.content %> <%= link_to '🗑️',
          review_path(review),
          method: :delete,
          data: { confirm: "Are you sure?" }%></li>
    <% end %>
    </ul>
  </div>
  <div class="mt-4">
    <p>Your last 3 activities</p>
    <ul>
    <% @user.visits.last(3).each do |visit| %>
    <p><%= visit.created_at.strftime("%m/%d/%Y")%>: <%= link_to visit.place.name, place_path(visit.place) %></p>
    <% end %>
    </ul>
  </div>

  <%= line_chart @user.visits.group_by_month(:created_at).count, width: "200px", height: "100px", colors: ["#2B5D6C"], points: false%> 
  <p>Places you have visited</p>
  <%= pie_chart @user.sport_types.group(:name).count  %> 
 	<p>Most frequent activity</p>
  <%= bar_chart @user.sport_types.group(:name).count %> 

  <div>
    <p><%= link_to "My profile", profile_path %></p>
    <p><%= link_to "About us", about_path %></p>
    <p><%= link_to "Contact us", contact_path %></p>
    <p><%= link_to "Log Out", destroy_user_session_path, method: :delete %></p>
  </div>

  <div>
  <h3>Join chatrooms</h3>
  <% @sporttypes.each do |sport| %>
    <%= link_to sport.name, chatroom_path(sport.chatroom), class: "button btn btn-primary mt-1 w-100" %>
    <% end %>
  </div>

</div>

